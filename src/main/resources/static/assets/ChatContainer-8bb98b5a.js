import{f as ue,c as Ie,r as d,a as Be,j as r,g as ee,b as oe,s as w,d as i,_ as $,e as P,u as te,h as G,i as Re,B as Z,k as _,l as ae,m as ke,n as H,o as F,p as K,q as R,T as A,t as je,P as U,v as ze,w as Te,x as Me,C as Oe}from"./index-149e384e.js";import{A as ve,T as Pe,I as De}from"./TextField-ccee2ed2.js";function Le(e,o=0,a=1){return Ie(e,o,a)}function _e(e){e=e.slice(1);const o=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(o);return a&&a[0].length===1&&(a=a.map(t=>t+t)),a?`rgb${a.length===4?"a":""}(${a.map((t,n)=>n<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3).join(", ")})`:""}function xe(e){if(e.type)return e;if(e.charAt(0)==="#")return xe(_e(e));const o=e.indexOf("("),a=e.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(a)===-1)throw new Error(ue(9,e));let t=e.substring(o+1,e.length-1),n;if(a==="color"){if(t=t.split(" "),n=t.shift(),t.length===4&&t[3].charAt(0)==="/"&&(t[3]=t[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error(ue(10,n))}else t=t.split(",");return t=t.map(c=>parseFloat(c)),{type:a,values:t,colorSpace:n}}function Ae(e){const{type:o,colorSpace:a}=e;let{values:t}=e;return o.indexOf("rgb")!==-1?t=t.map((n,c)=>c<3?parseInt(n,10):n):o.indexOf("hsl")!==-1&&(t[1]=`${t[1]}%`,t[2]=`${t[2]}%`),o.indexOf("color")!==-1?t=`${a} ${t.join(" ")}`:t=`${t.join(", ")}`,`${o}(${t})`}function V(e,o){return e=xe(e),o=Le(o),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${o}`:e.values[3]=o,Ae(e)}function Ne(e){return d.Children.toArray(e).filter(o=>d.isValidElement(o))}const Ee=Be(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Se(e){return oe("MuiChip",e)}const We=ee("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),l=We,Ve=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Ge=e=>{const{classes:o,disabled:a,size:t,color:n,iconColor:c,onDelete:p,clickable:s,variant:u}=e,f={root:["root",u,a&&"disabled",`size${i(t)}`,`color${i(n)}`,s&&"clickable",s&&`clickableColor${i(n)}`,p&&"deletable",p&&`deletableColor${i(n)}`,`${u}${i(n)}`],label:["label",`label${i(t)}`],avatar:["avatar",`avatar${i(t)}`,`avatarColor${i(n)}`],icon:["icon",`icon${i(t)}`,`iconColor${i(c)}`],deleteIcon:["deleteIcon",`deleteIcon${i(t)}`,`deleteIconColor${i(n)}`,`deleteIcon${i(u)}Color${i(n)}`]};return ae(f,Se,o)},Ue=w("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e,{color:t,iconColor:n,clickable:c,onDelete:p,size:s,variant:u}=a;return[{[`& .${l.avatar}`]:o.avatar},{[`& .${l.avatar}`]:o[`avatar${i(s)}`]},{[`& .${l.avatar}`]:o[`avatarColor${i(t)}`]},{[`& .${l.icon}`]:o.icon},{[`& .${l.icon}`]:o[`icon${i(s)}`]},{[`& .${l.icon}`]:o[`iconColor${i(n)}`]},{[`& .${l.deleteIcon}`]:o.deleteIcon},{[`& .${l.deleteIcon}`]:o[`deleteIcon${i(s)}`]},{[`& .${l.deleteIcon}`]:o[`deleteIconColor${i(t)}`]},{[`& .${l.deleteIcon}`]:o[`deleteIcon${i(u)}Color${i(t)}`]},o.root,o[`size${i(s)}`],o[`color${i(t)}`],c&&o.clickable,c&&t!=="default"&&o[`clickableColor${i(t)})`],p&&o.deletable,p&&t!=="default"&&o[`deletableColor${i(t)}`],o[u],o[`${u}${i(t)}`]]}})(({theme:e,ownerState:o})=>{const a=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return $({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${l.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${l.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:a,fontSize:e.typography.pxToRem(12)},[`& .${l.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${l.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${l.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${l.icon}`]:$({marginLeft:5,marginRight:-6},o.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},o.iconColor===o.color&&$({color:e.vars?e.vars.palette.Chip.defaultIconColor:a},o.color!=="default"&&{color:"inherit"})),[`& .${l.deleteIcon}`]:$({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:P(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:P(e.palette.text.primary,.4)}},o.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},o.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[o.color].contrastTextChannel} / 0.7)`:P(e.palette[o.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[o.color].contrastText}})},o.size==="small"&&{height:24},o.color!=="default"&&{backgroundColor:(e.vars||e).palette[o.color].main,color:(e.vars||e).palette[o.color].contrastText},o.onDelete&&{[`&.${l.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:P(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},o.onDelete&&o.color!=="default"&&{[`&.${l.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}})},({theme:e,ownerState:o})=>$({},o.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:P(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${l.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:P(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},o.clickable&&o.color!=="default"&&{[`&:hover, &.${l.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}}),({theme:e,ownerState:o})=>$({},o.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${l.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${l.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${l.avatar}`]:{marginLeft:4},[`& .${l.avatarSmall}`]:{marginLeft:2},[`& .${l.icon}`]:{marginLeft:4},[`& .${l.iconSmall}`]:{marginLeft:2},[`& .${l.deleteIcon}`]:{marginRight:5},[`& .${l.deleteIconSmall}`]:{marginRight:3}},o.variant==="outlined"&&o.color!=="default"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.7)`:P(e.palette[o.color].main,.7)}`,[`&.${l.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:P(e.palette[o.color].main,e.palette.action.hoverOpacity)},[`&.${l.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:P(e.palette[o.color].main,e.palette.action.focusOpacity)},[`& .${l.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.7)`:P(e.palette[o.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[o.color].main}}})),we=w("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,o)=>{const{ownerState:a}=e,{size:t}=a;return[o.label,o[`label${i(t)}`]]}})(({ownerState:e})=>$({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function ge(e){return e.key==="Backspace"||e.key==="Delete"}const He=d.forwardRef(function(o,a){const t=te({props:o,name:"MuiChip"}),{avatar:n,className:c,clickable:p,color:s="default",component:u,deleteIcon:f,disabled:v=!1,icon:b,label:k,onClick:x,onDelete:h,onKeyDown:j,onKeyUp:I,size:D="medium",variant:L="filled",tabIndex:B,skipFocusWhenDisabled:C=!1}=t,O=G(t,Ve),T=d.useRef(null),z=Re(T,a),m=y=>{y.stopPropagation(),h&&h(y)},M=y=>{y.currentTarget===y.target&&ge(y)&&y.preventDefault(),j&&j(y)},S=y=>{y.currentTarget===y.target&&(h&&ge(y)?h(y):y.key==="Escape"&&T.current&&T.current.blur()),I&&I(y)},q=p!==!1&&x?!0:p,Y=q||h?Z:u||"div",J=$({},t,{component:Y,disabled:v,size:D,color:s,iconColor:d.isValidElement(b)&&b.props.color||s,onDelete:!!h,clickable:q,variant:L}),E=Ge(J),ye=Y===Z?$({component:u||"div",focusVisibleClassName:E.focusVisible},h&&{disableRipple:!0}):{};let ce=null;h&&(ce=f&&d.isValidElement(f)?d.cloneElement(f,{className:_(f.props.className,E.deleteIcon),onClick:m}):r.jsx(Ee,{className:_(E.deleteIcon),onClick:m}));let de=null;n&&d.isValidElement(n)&&(de=d.cloneElement(n,{className:_(E.avatar,n.props.className)}));let pe=null;return b&&d.isValidElement(b)&&(pe=d.cloneElement(b,{className:_(E.icon,b.props.className)})),r.jsxs(Ue,$({as:Y,className:_(E.root,c),disabled:q&&v?!0:void 0,onClick:x,onKeyDown:M,onKeyUp:S,ref:z,tabIndex:C&&v?-1:B,ownerState:J},ye,O,{children:[de||pe,r.jsx(we,{className:_(E.label),ownerState:J,children:k}),ce]}))}),Fe=He;function Ke(e){return oe("MuiToggleButton",e)}const qe=ee("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),W=qe,Ye=d.createContext({}),be=Ye,Je=d.createContext(void 0),Ce=Je;function Qe(e,o){return o===void 0||e===void 0?!1:Array.isArray(o)?o.indexOf(e)>=0:e===o}const Xe=["value"],Ze=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],eo=e=>{const{classes:o,fullWidth:a,selected:t,disabled:n,size:c,color:p}=e,s={root:["root",t&&"selected",n&&"disabled",a&&"fullWidth",`size${i(c)}`,p]};return ae(s,Ke,o)},oo=w(Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[`size${i(a.size)}`]]}})(({theme:e,ownerState:o})=>{let a=o.color==="standard"?e.palette.text.primary:e.palette[o.color].main,t;return e.vars&&(a=o.color==="standard"?e.vars.palette.text.primary:e.vars.palette[o.color].main,t=o.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[o.color].mainChannel),$({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},o.fullWidth&&{width:"100%"},{[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:V(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${W.selected}`]:{color:a,backgroundColor:e.vars?`rgba(${t} / ${e.vars.palette.action.selectedOpacity})`:V(a,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${t} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:V(a,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${t} / ${e.vars.palette.action.selectedOpacity})`:V(a,e.palette.action.selectedOpacity)}}}},o.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},o.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),to=d.forwardRef(function(o,a){const t=d.useContext(be),{value:n}=t,c=G(t,Xe),p=d.useContext(Ce),s=ke($({},c,{selected:Qe(o.value,n)}),o),u=te({props:s,name:"MuiToggleButton"}),{children:f,className:v,color:b="standard",disabled:k=!1,disableFocusRipple:x=!1,fullWidth:h=!1,onChange:j,onClick:I,selected:D,size:L="medium",value:B}=u,C=G(u,Ze),O=$({},u,{color:b,disabled:k,disableFocusRipple:x,fullWidth:h,size:L}),T=eo(O),z=M=>{I&&(I(M,B),M.defaultPrevented)||j&&j(M,B)},m=p||"";return r.jsx(oo,$({className:_(c.className,T.root,v,m),disabled:k,focusRipple:!x,ref:a,onClick:z,onChange:j,value:B,ownerState:O,"aria-pressed":D},C,{children:f}))}),ao=to;function ro(e){return oe("MuiToggleButtonGroup",e)}const no=ee("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),g=no,so=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],lo=e=>{const{classes:o,orientation:a,fullWidth:t,disabled:n}=e,c={root:["root",a==="vertical"&&"vertical",t&&"fullWidth"],grouped:["grouped",`grouped${i(a)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ae(c,ro,o)},io=w("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[{[`& .${g.grouped}`]:o.grouped},{[`& .${g.grouped}`]:o[`grouped${i(a.orientation)}`]},{[`& .${g.firstButton}`]:o.firstButton},{[`& .${g.lastButton}`]:o.lastButton},{[`& .${g.middleButton}`]:o.middleButton},o.root,a.orientation==="vertical"&&o.vertical,a.fullWidth&&o.fullWidth]}})(({ownerState:e,theme:o})=>$({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${g.grouped}`]:$({},e.orientation==="horizontal"?{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderTop:0,marginTop:0}})},e.orientation==="horizontal"?{[`& .${g.firstButton},& .${g.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${g.firstButton},& .${g.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},e.orientation==="horizontal"?{[`& .${g.lastButton}.${W.disabled},& .${g.middleButton}.${W.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${g.lastButton}.${W.disabled},& .${g.middleButton}.${W.disabled}`]:{borderTop:"1px solid transparent"}})),co=d.forwardRef(function(o,a){const t=te({props:o,name:"MuiToggleButtonGroup"}),{children:n,className:c,color:p="standard",disabled:s=!1,exclusive:u=!1,fullWidth:f=!1,onChange:v,orientation:b="horizontal",size:k="medium",value:x}=t,h=G(t,so),j=$({},t,{disabled:s,fullWidth:f,orientation:b,size:k}),I=lo(j),D=d.useCallback((z,m)=>{if(!v)return;const M=x&&x.indexOf(m);let S;x&&M>=0?(S=x.slice(),S.splice(M,1)):S=x?x.concat(m):[m],v(z,S)},[v,x]),L=d.useCallback((z,m)=>{v&&v(z,x===m?null:m)},[v,x]),B=d.useMemo(()=>({className:I.grouped,onChange:u?L:D,value:x,size:k,fullWidth:f,color:p,disabled:s}),[I.grouped,u,L,D,x,k,f,p,s]),C=Ne(n),O=C.length,T=z=>{const m=z===0,M=z===O-1;return m&&M?"":m?I.firstButton:M?I.lastButton:I.middleButton};return r.jsx(io,$({role:"group",className:_(I.root,c),ref:a,ownerState:j},h,{children:r.jsx(be.Provider,{value:B,children:C.map((z,m)=>r.jsx(Ce.Provider,{value:T(m),children:z},m))})}))}),po=co;var re={},uo=F;Object.defineProperty(re,"__esModule",{value:!0});var ne=re.default=void 0,go=uo(H()),fo=r;ne=re.default=(0,go.default)((0,fo.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business");var se={},vo=F;Object.defineProperty(se,"__esModule",{value:!0});var $e=se.default=void 0,xo=vo(H()),fe=r;$e=se.default=(0,xo.default)([(0,fe.jsx)("path",{d:"M1 11v10h5v-6h4v6h5V11L8 6z"},"0"),(0,fe.jsx)("path",{d:"M10 3v1.97l7 5V11h2v2h-2v2h2v2h-2v4h6V3zm9 6h-2V7h2z"},"1")],"HomeWork");var le={},bo=F;Object.defineProperty(le,"__esModule",{value:!0});var he=le.default=void 0,Co=bo(H()),$o=r;he=le.default=(0,Co.default)((0,$o.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var N=(e=>(e.INMOBILIARIA="inmobiliaria",e.PROPIEDAD="propiedad",e.PERSONA="persona",e))(N||{});const ho={business:ne,homework:$e,person:he},Q=e=>{const o=e.toLowerCase();return ho[o]??ne},mo=({currentAgent:e,onChangeAgent:o,onClearConversation:a})=>{const{t}=K(),n=[{type:N.INMOBILIARIA,name:t("agents.inmobiliaria.name"),description:t("agents.inmobiliaria.description"),endpoint:"/agent/chat",icon:"Business",Icon:Q("business")},{type:N.PROPIEDAD,name:t("agents.propiedad.name"),description:t("agents.propiedad.description"),endpoint:"/agent/propiedades/chat",icon:"HomeWork",Icon:Q("homework")},{type:N.PERSONA,name:t("agents.persona.name"),description:t("agents.persona.description"),endpoint:"/agent/personas/chat",icon:"Person",Icon:Q("person")}],c=(p,s)=>{s&&s!==e&&o(s)};return r.jsxs(R,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:1,alignItems:{xs:"stretch",sm:"center"}},children:[r.jsx(po,{value:e,exclusive:!0,onChange:c,color:"primary",sx:{flexWrap:"wrap",flexGrow:1,"& .MuiToggleButton-root":{textTransform:"none",px:2,py:1.5,borderRadius:2}},children:n.map(({type:p,name:s,description:u,Icon:f})=>r.jsx(ao,{value:p,children:r.jsxs(R,{sx:{textAlign:"left"},children:[r.jsxs(R,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(f,{fontSize:"small"}),r.jsx(A,{variant:"subtitle2",children:s})]}),r.jsx(A,{variant:"caption",color:"text.secondary",children:u})]})},p))}),r.jsx(je,{variant:"outlined",color:"secondary",onClick:a,children:t("chat.clearConversation")})]})},yo=e=>new Intl.DateTimeFormat("default",{hour:"2-digit",minute:"2-digit"}).format(e),Io=({message:e})=>{const o=e.sender==="user",a=e.success===!1;return r.jsx(R,{sx:{display:"flex",justifyContent:o?"flex-end":"flex-start",mb:2},children:r.jsx(R,{sx:{maxWidth:{xs:"85%",sm:"70%"}},children:a?r.jsx(ve,{severity:"error",children:e.content}):r.jsxs(U,{elevation:1,sx:{p:2,bgcolor:o?"primary.main":"grey.100",color:o?"primary.contrastText":"text.primary",borderRadius:2},children:[r.jsx(A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:e.content}),r.jsx(A,{variant:"caption",sx:{display:"block",mt:.5,opacity:.7,textAlign:"right"},children:yo(e.timestamp)})]})})})};var ie={},Bo=F;Object.defineProperty(ie,"__esModule",{value:!0});var me=ie.default=void 0,Ro=Bo(H()),ko=r;me=ie.default=(0,Ro.default)((0,ko.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");const jo=({onSendMessage:e,disabled:o=!1})=>{const{t:a}=K(),[t,n]=d.useState(""),c=()=>{t.trim()&&!o&&(e(t),n(""))},p=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),c())};return r.jsx(U,{elevation:3,sx:{p:2},children:r.jsxs(R,{sx:{display:"flex",gap:1,alignItems:"flex-end"},children:[r.jsx(Pe,{fullWidth:!0,multiline:!0,maxRows:4,value:t,onChange:s=>n(s.target.value),onKeyPress:p,placeholder:a("chat.placeholder"),disabled:o,variant:"outlined",size:"small"}),r.jsx(De,{color:"primary",onClick:c,disabled:!t.trim()||o,children:r.jsx(me,{})})]})})},zo=ze`
  0% { opacity: 0.2; transform: translateY(0); }
  50% { opacity: 1; transform: translateY(-2px); }
  100% { opacity: 0.2; transform: translateY(0); }
`,To=()=>{const{t:e}=K();return r.jsxs(R,{sx:{display:"flex",alignItems:"center",mb:2,gap:1},children:[r.jsx(R,{sx:{display:"flex",gap:.5,bgcolor:"grey.100",p:2,borderRadius:2},children:[0,1,2].map(o=>r.jsx(R,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"grey.500",animation:`${zo} 1.4s infinite`,animationDelay:`${o*.2}s`}},o))}),r.jsx(A,{variant:"body2",color:"text.secondary",children:e("chat.typing")})]})},Mo={[N.INMOBILIARIA]:"/agent/chat",[N.PROPIEDAD]:"/agent/propiedades/chat",[N.PERSONA]:"/agent/personas/chat"},Oo={sendMessage:async(e,o)=>{const a=Mo[e];return(await Te.post(a,o)).data}},X=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2,11),Po=e=>{const[o,a]=d.useState([]),[t,n]=d.useState(null),[c,p]=d.useState(e),[s,u]=d.useState(!1),[f,v]=d.useState(null),b=d.useCallback(async h=>{var D,L;if(!h.trim())return;const j=h.trim(),I={id:X(),content:j,sender:"user",timestamp:new Date};a(B=>[...B,I]),u(!0),v(null);try{const B={message:j,sessionId:t||void 0},C=await Oo.sendMessage(c,B);!t&&C.sessionId&&n(C.sessionId);const O={id:X(),content:C.response,sender:"agent",timestamp:new Date,success:C.success,error:C.error};a(T=>[...T,O]),C.success||v(C.error||"Unknown error occurred")}catch(B){const C=((L=(D=B.response)==null?void 0:D.data)==null?void 0:L.message)||B.message||"Network error";v(C);const O={id:X(),content:C,sender:"agent",timestamp:new Date,success:!1,error:C};a(T=>[...T,O])}finally{u(!1)}},[c,t]),k=d.useCallback(()=>{a([]),n(null),v(null)},[]),x=d.useCallback(h=>{p(h),k()},[k]);return{messages:o,sessionId:t,currentAgent:c,isLoading:s,error:f,sendMessage:b,clearConversation:k,changeAgent:x}},_o=()=>{const{t:e}=K(),{messages:o,sessionId:a,currentAgent:t,isLoading:n,error:c,sendMessage:p,clearConversation:s,changeAgent:u}=Po(N.INMOBILIARIA),{user:f}=Me(),v=d.useRef(null);return d.useEffect(()=>{var b;(b=v.current)==null||b.scrollIntoView({behavior:"smooth"})},[o]),r.jsxs(Oe,{maxWidth:"md",sx:{display:"flex",flexDirection:"column",py:2,minHeight:{xs:"calc(100vh - 56px)",sm:"calc(100vh - 64px)"}},children:[r.jsxs(U,{elevation:2,sx:{p:2,mb:2},children:[r.jsxs(R,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},gap:1,mb:1},children:[r.jsxs(R,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[r.jsx(A,{variant:"h5",children:e("chat.title")}),f&&r.jsxs(A,{variant:"body2",color:"text.secondary",children:[f.name," · ",f.email]})]}),r.jsx(R,{sx:{display:"flex",alignItems:"center",gap:1,alignSelf:{xs:"stretch",sm:"center"},width:{xs:"100%",sm:"auto"},justifyContent:{xs:"space-between",sm:"flex-end"}},children:a&&r.jsx(Fe,{label:`${e("chat.sessionLabel")}: ${a.substring(0,8)}...`,size:"small"})})]}),r.jsx(mo,{currentAgent:t,onChangeAgent:u,onClearConversation:s}),c&&r.jsx(ve,{severity:"error",sx:{mt:2},children:c})]}),r.jsxs(U,{elevation:1,sx:{flex:1,overflowY:"auto",p:2,mb:2,bgcolor:"grey.50"},children:[o.length===0?r.jsx(R,{sx:{textAlign:"center",py:4},children:r.jsx(A,{color:"text.secondary",children:e("chat.emptyState")})}):o.map(b=>r.jsx(Io,{message:b},b.id)),n&&r.jsx(To,{}),r.jsx("div",{ref:v})]}),r.jsx(jo,{onSendMessage:p,disabled:n})]})};export{_o as ChatContainer};
